<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- bootstrap引入 -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css.map">
    <link rel="stylesheet" type="text/css" href="font/css/all.min.css" />
    <script src="js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
    <title>MyFl登录</title>
    <!-- 图标引入 -->
    <link rel="icon" type="images/x-ico" href="images/title-ico.ico" />
    <!-- elementUi -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- css -->
    <link rel="stylesheet" href="css/login-2.css">
    <link rel="stylesheet" href="css/login.css">
    <!--  -->
    <script src="js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>

    <body>
        <div class="container right-panel-active" id="app">
            <div class="box-1">
                <!-- Sign Up -->
                <div class="container__form container--signup">
                    <el-form :model="ruleForm" status-icon :rules="rules" ref="ruleForm" label-width="100" id="form1" class="form demo-ruleForm">
                        <h2 class="form__title">立即注册</h2>
                        <el-form-item label="账号" prop="name">
                            <el-input v-model.number="ruleForm.name"></el-input>
                        </el-form-item>
                        <el-form-item label="邮箱" prop="email">
                            <el-input v-model="ruleForm.email"></el-input>
                        </el-form-item>
                        <el-form-item label="密码" prop="pass">
                            <el-input type="password" v-model="ruleForm.pass" autocomplete="off"></el-input>
                        </el-form-item>
                        <el-form-item label="确认密码" prop="checkPass">
                            <el-input type="password" v-model="ruleForm.checkPass" autocomplete="off"></el-input>
                        </el-form-item>
                        <div class="box">
                            <el-form :inline="true">
                                <input type="button" v-model="rad" @click="f1" style="color:black;"></input>
                                <input type="text" placeholder="验证码" maxlength="4" v-model="yzm">
                        </div>
                        <el-form-item class="box">
                            <el-button @click="resetForm('ruleForm')">清空</el-button>
                            <el-button type="primary" @keyup.Enter="f3" @click="submitForm('ruleForm')">注册</el-button>
                        </el-form-item>
                        </el-form>
                </div>

                <!-- Sign In -->
                <div class="container__form container--signin">
                    <!-- <form action="#" class="form" id="form2">
                <h2 class="form__title">欢迎登录</h2>
                <input type="email" placeholder="Email" class="input" />
                <input type="password" placeholder="Password" class="input" />
                <a href="#" class="link">Forgot your password?</a>
                <button class="btn">登录</button>
            </form> -->
                    <el-form :model="ruleForm" status-icon :rules="rules" ref="ruleForm" label-width="100" id="form2" class="form demo-ruleForm">
                        <h2 class="form__title">欢迎登录</h2>
                        <el-form-item label="账号" prop="name">
                            <el-input v-model.number="ruleForm.name"></el-input>
                        </el-form-item>
                        <el-form-item label="密码" prop="pass">
                            <el-input type="password" v-model="ruleForm.pass" autocomplete="off"></el-input>
                        </el-form-item>
                        <!-- <el-form-item label="确认密码" prop="checkPass">
                            <el-input type="password" v-model="ruleForm.checkPass" autocomplete="off"></el-input>
                        </el-form-item> -->
                        <div class="box">
                            <el-form :inline="true">
                                <input type="button" v-model="rad" @click="f1" style="color:black;"></input>
                                <input type="text" placeholder="验证码" maxlength="4" v-model="yzm">
                        </div>
                        <el-form-item class="box">
                            <el-button @click="resetForm('ruleForm')">清空</el-button>
                            <el-button type="primary" @keyup.Enter="f3" onclick="" @click="submitForm2('ruleForm')">登录</el-button>
                        </el-form-item>
                        </el-form>
                </div>
                <!-- Overlay -->
                <div class="container__overlay">
                    <div class="overlay">
                        <div class="overlay__panel overlay--left">
                            <button class="btn" id="signIn">登录账号</button>
                        </div>
                        <div class="overlay__panel overlay--right">
                            <button class="btn" id="signUp">注册账号</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 移动端登陆注册 -->
            <div class="container box-2 d-block d-md-none">
                <el-card class="box-card">
                    <div slot="header" class="clearfix">
                        <h2>注册页面</h2>
                    </div>
                    <div slot="header" class="clearfix" style="text-align: end;">
                        <span><a href="login-2.html">登录</a></span>
                    </div>
                    <el-form :model="ruleForm" status-icon :rules="rules" ref="ruleForm3" label-width="100" class="demo-ruleForm">
                        <el-form-item label="账号" prop="name">
                            <el-input v-model.number="ruleForm.name"></el-input>
                        </el-form-item>
                        <el-form-item label="邮箱" prop="email">
                            <el-input v-model="ruleForm.email"></el-input>
                        </el-form-item>
                        <el-form-item label="密码" prop="pass">
                            <el-input type="password" v-model="ruleForm.pass" autocomplete="off"></el-input>
                        </el-form-item>
                        <el-form-item label="确认密码" prop="checkPass">
                            <el-input type="password" v-model="ruleForm.checkPass" autocomplete="off"></el-input>
                        </el-form-item>
                        <div class="box">
                            <el-form :inline="true">
                                <input type="button" v-model="rad" @click="f1" style="color:black;"></input>
                                <input type="text" placeholder="验证码" maxlength="4" v-model="yzm">
                        </div>
                        <el-form-item class="box">
                            <el-button @click="resetForm('ruleForm')">清空</el-button>
                            <el-button type="primary" @keyup.Enter="f3" @click="submitForm('ruleForm')">注册</el-button>
                        </el-form-item>

                        </el-form-item>
                        </el-form>
            </div>
            </el-card>
        </div>

        </div>
        <!-- 先导入vue在导入elementul -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="https://unpkg.com/element-ui/lib/index.js"></script>
        <script>
            var app = new Vue({
                el: "#app",
                data() {
                    var validatePass = (rule, value, callback) => {
                        if (value === '') {
                            callback(new Error('请输入密码'));
                        } else {
                            if (this.ruleForm.checkPass !== '') {
                                this.$refs.ruleForm.validateField('checkPass');
                            }
                            callback();
                        }
                    };
                    var validatePass2 = (rule, value, callback) => {
                        if (value === '') {
                            callback(new Error('请再次输入密码'));
                        } else if (value !== this.ruleForm.pass) {
                            callback(new Error('两次输入密码不一致!'));
                        } else {
                            callback();
                        }
                    };
                    return {
                        ruleForm: {
                            name: '',
                            email: '',
                            pass: '',
                            checkPass: '',
                            yzm: '',
                            rad: Math.random().toString(36).substr(2).slice(0, 4),

                        },
                        rad: Math.random().toString(36).substr(2).slice(0, 4),
                        yzm: '',
                        rules: {
                            name: [{required: true,message: '请输入用户名',trigger: 'blur'}, {min: 3,max: 9,
                                message: '请输入3-9个字母或中文',
                                trigger: 'blur'
                            }],
                            email: [{required: true,message: '请输入邮箱地址',trigger: 'blur'
                            }, {type: 'email', message: '请输入正确的邮箱地址',trigger: ['blur', 'change']
                            }],
                            pass: [{ required: true,validator: validatePass,trigger: 'blur'
                            }, {min: 3,max: 18, message: '请输入3-18个数字或字母',trigger: 'blur'
                            }],
                            checkPass: [{required: true,validator: validatePass2,trigger: 'blur'
                            }],
                            yzm: [{required: true,message: '请输入验证码',trigger: 'blur'
                            }]
                        }
                    };
                },
                methods: {
                    resetForm(formName) {
                        this.$refs[formName].resetFields();
                    },
                    f1: function() {
                        this.rad = Math.random().toString(36).substr(2).slice(0, 4)
                    },
                    submitForm(formName) {
                        this.$refs[formName].validate((valid) => {
                            if (this.valid != "" && this.yzm == "") {
                                alert("请留意验证码是否输入")
                            } else
                            if (valid == this.rad == this.yzm == this.email) {
                                // location.href = "index-1.html"
                            } else if (this.rad == this.yzm == this.valid) {
                                location.href = "login.html"
                            } else if (this.rad !== this.yzm) {
                                alert("请仔细查看验证码或邮箱填写错误")
                                this.rad = Math.random().toString(36).substr(2).slice(0, 4)
                                this.yzm = ""
                            } else if (this.rad == this.yzm == valid) {

                                alert(title = "注册成功！请自行登录！", type = "success")
                                location.href = "login.html"
                            } else {
                                // console.log('error submit!!');
                                alert("您未输入账号密码及邮箱！")
                                return false;
                            }
                        })
                        if (this.yzm == "") {
                            // this.result = "请输入验证码"
                            return
                            alert("请输入验证码")
                        } else if (this.rad == this.yzm == valid) {
                            location.href = "login.html"
                        }
                    },
                    submitForm2(formName) {
                        this.$refs[formName].validate((valid) => {
                            if (this.valid !== "" && this.yzm == "") {
                                alert("请留意验证码是否输入")
                            } else if (this.rad !== this.yzm) {
                                alert("请仔细查看验证码或邮箱填写错误")
                                this.rad = Math.random().toString(36).substr(2).slice(0, 4)
                                this.yzm = ""
                            } else if (this.rad == this.yzm == valid) {
                                location.href = "index.html"
                            } else {
                                // console.log('error submit!!');
                                alert("您未输入账号密码及邮箱！")
                                return false;
                            }
                        })
                        if (this.yzm == "") {
                            // this.result = "请输入验证码"
                            return
                            alert("请输入验证码")
                        }
                    },
                },
            })
            const signInBtn = document.getElementById("signIn");
            const signUpBtn = document.getElementById("signUp");
            const fistForm = document.getElementById("form1");
            const secondForm = document.getElementById("form2");
            const container = document.querySelector(".container");

            signInBtn.addEventListener("click", () => {
                container.classList.remove("right-panel-active");
            });
            signUpBtn.addEventListener("click", () => {
                container.classList.add("right-panel-active");
            });

            fistForm.addEventListener("submit", (e) => e.preventDefault());
            secondForm.addEventListener("submit", (e) => e.preventDefault());
        </script>
    </body>

</html>